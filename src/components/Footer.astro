---
import { ui, defaultLang } from '../i18n/ui';

function getLangFromUrl(url: URL) {
  const [, lang] = url.pathname.split('/');
  if (lang in ui) return lang as keyof typeof ui;
  return defaultLang;
}

const lang = getLangFromUrl(Astro.url);
const t = ui[lang];

const today = new Date();
---

<footer>
	<div class="footer-container">
		<div class="footer-column newsletter-column">
			<div class="newsletter">
				<h3>{t['footer.newsletter.title']}</h3>
				<p>{t['footer.newsletter.description']}</p>
				<form
					action="https://buttondown.email/api/emails/embed-subscribe/brainnoises"
					method="post"
					target="popupwindow"
					onsubmit="window.open('https://buttondown.email/brainnoises', 'popupwindow')"
					class="embeddable-buttondown-form"
				>
					<label for="bd-email" class="sr-only">{t['footer.newsletter.email']}</label>
					<input type="email" name="email" id="bd-email" placeholder={t['footer.newsletter.email']} required />
					<input type="submit" value={t['footer.newsletter.subscribe']} />
				</form>
			</div>
		</div>
		<div class="footer-column copyright-column">
			<div class="copyright">
				&copy; {today.getFullYear()} Enio. All rights reserved.
			</div>
		</div>
		<div class="footer-column links-column">
			<div class="links">
				<a href="https://ko-fi.com/brainnoises" target="_blank" rel="noopener noreferrer">{t['footer.kofi']}</a>
				<a href={`/${lang}/${t['nav.about.slug']}`}>{t['nav.about']}</a>
				<a href={`/${lang}/${t['nav.contact.slug']}`}>{t['nav.contact']}</a>
				<a href={`/${lang}/${t['nav.terms.slug']}`}>{t['nav.terms']}</a>
				<a href={`/${lang}/${t['nav.privacy.slug']}`}>{t['nav.privacy']}</a>
			</div>
		</div>
	</div>
</footer>
<style>
	footer {
		background-color: #000000;
		border-top: 3px solid #FFFFFF;
		padding: 2rem;
		margin-top: 2rem;
		font-size: var(--text-sm);
		color: rgb(var(--gray));
	}

	.footer-container {
		display: flex;
		justify-content: space-between;
		align-items: center;
		flex-wrap: wrap;
		gap: 2rem;
	}

	.footer-column {
		flex: 1;
	}

	.newsletter-column {
		min-width: 300px;
	}

	.copyright-column {
		text-align: center;
	}

	.links-column {
		text-align: right;
	}

	.links {
		display: flex;
		flex-wrap: wrap;
		gap: 1.5rem;
		justify-content: flex-end;
	}

	.links a {
		color: rgb(var(--gray));
		text-decoration: none;
		transition: color 0.2s ease;
	}

	.links a:hover {
		color: var(--green-bright);
	}

	.newsletter h3 {
		font-size: 1.25em;
		margin-top: 0;
		margin-bottom: 0.5rem;
		color: rgb(var(--black));
	}

	.newsletter p {
		margin: 0 0 1rem 0;
		color: rgb(var(--gray));
	}

	.embeddable-buttondown-form {
		display: flex;
		gap: 0.5rem;
	}

	.embeddable-buttondown-form input[type="email"] {
		flex-grow: 1;
		padding: 0.5rem;
		border: 1px solid #CCCCCC; /* Borda cinza claro */
		border-radius: 4px;
		background-color: #000000;
		color: #FFFFFF;
	}

	.embeddable-buttondown-form input[type="email"]::placeholder {
		color: #BBBBBB; /* Placeholder cinza mais claro */
		opacity: 1; /* Garante que a cor seja aplicada */
	}

	.embeddable-buttondown-form input[type="submit"] {
		padding: 0.5rem 1rem;
		border: 1px solid #CCCCCC; /* Borda cinza claro */
		border-radius: 4px;
		background-color: #000000;
		color: #FFFFFF;
		font-weight: bold;
		cursor: pointer;
		transition: background-color 0.2s ease, color 0.2s ease;
	}

	.embeddable-buttondown-form input[type="submit"]:hover {
		background-color: #FFFFFF;
		color: #000000;
	}

	@media (max-width: 768px) {
		.footer-container {
			flex-direction: column;
			align-items: flex-start;
		}
		.copyright-column, .links-column {
			text-align: left;
		}
		.links {
			justify-content: flex-start;
		}
	}
</style>
