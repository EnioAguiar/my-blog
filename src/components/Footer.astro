---
import { ui, defaultLang } from '../i18n/ui';

function getLangFromUrl(url: URL) {
  const [, lang] = url.pathname.split('/');
  if (lang in ui) return lang as keyof typeof ui;
  return defaultLang;
}

const lang = getLangFromUrl(Astro.url);
const t = ui[lang];

const today = new Date();
---

<footer>
	<div class="footer-container">
		<div class="footer-column newsletter-column">
			<div class="newsletter">
				<h3>{t['footer.newsletter.title']}</h3>
				<p>{t['footer.newsletter.description']}</p>
				<form
					action="https://buttondown.email/api/emails/embed-subscribe/brainnoises"
					method="post"
					target="popupwindow"
					onsubmit="window.open('https://buttondown.email/brainnoises', 'popupwindow')"
					class="embeddable-buttondown-form"
				>
					<label for="bd-email" class="sr-only">{t['footer.newsletter.email']}</label>
					<input type="email" name="email" id="bd-email" placeholder={t['footer.newsletter.email']} required />
					<input type="submit" value={t['footer.newsletter.subscribe']} />
				</form>
			</div>
		</div>
		<div class="footer-column copyright-column">
			<div class="copyright">
				&copy; {today.getFullYear()} Enio. All rights reserved.
			</div>
		</div>
		<div class="footer-column links-column">
			<div class="links">
				<a href="https://ko-fi.com/brainnoises" target="_blank" rel="noopener noreferrer">{t['footer.kofi']}</a>
				<a href={`/${lang}/${t['nav.about.slug']}`}>{t['nav.about']}</a>
				<a href={`/${lang}/${t['nav.contact.slug']}`}>{t['nav.contact']}</a>
				<a href={`/${lang}/${t['nav.terms.slug']}`}>{t['nav.terms']}</a>
				<a href={`/${lang}/${t['nav.privacy.slug']}`}>{t['nav.privacy']}</a>
			</div>
			<div class="social-links">
				<a href="https://x.com/brainnoises_io" target="_blank" rel="noopener noreferrer" aria-label="X (Twitter)">
					<svg class="social-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
						<path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
					</svg>
				</a>
				<a href="https://www.reddit.com/r/Brainnoises/" target="_blank" rel="noopener noreferrer" aria-label="Reddit">
					<svg class="social-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
						<path d="M12.017 21.64c-5.325 0-9.642-4.318-9.642-9.643C2.375 6.675 6.692 2.358 12.017 2.358c5.325 0 9.642 4.317 9.642 9.642s-4.317 9.64-9.642 9.64M12.017 0C5.39 0 0 5.39 0 12.017c0 6.627 5.39 12.017 12.017 12.017 6.627 0 12.017-5.39 12.017-12.017C24.034 5.39 18.644 0 12.017 0m5.83 12.576c0-1.42-.92-2.62-2.21-3.09.24-.18.39-.46.39-.77 0-.52-.42-.94-.94-.94s-.94.42-.94.94c0 .31.15.59.39.77-1.29.47-2.21 1.67-2.21 3.09 0 .52.42.94.94.94h2.44c.52 0 .94-.42.94-.94m-2.93-1.42c-.4 0-.72.32-.72.72s.32.72.72.72.72-.32.72-.72-.32-.72-.72-.72m-5.03 1.42c0-1.42-.92-2.62-2.21-3.09.24-.18.39-.46.39-.77 0-.52-.42-.94-.94-.94s-.94.42-.94.94c0 .31.15.59.39.77-1.29.47-2.21 1.67-2.21 3.09 0 .52.42.94.94.94h2.44c.52 0 .94-.42.94-.94m-2.93-1.42c-.4 0-.72.32-.72.72s.32.72.72.72.72-.32.72-.72-.32-.72-.72-.72m7.83 4.25c-1.83 1.12-4.23 1.12-6.06 0-1.02-.62-1.02-1.67 0-2.29 1.83-1.12 4.23-1.12 6.06 0 1.02.62 1.02 1.67 0 2.29"/>
					</svg>
				</a>
			</div>
		</div>
	</div>
</footer>
<style>
	footer {
		background-color: #000000;
		border-top: 1px solid #FFFFFF;
		padding: 2rem;
		margin-top: 2rem;
		font-size: var(--text-sm);
		color: rgb(var(--gray));
	}

	.footer-container {
		display: flex;
		justify-content: space-between;
		align-items: center;
		flex-wrap: wrap;
		gap: 2rem;
	}

	.footer-column {
		flex: 1;
	}

	.newsletter-column {
		min-width: 300px;
	}

	.copyright-column {
		text-align: center;
	}

	.links-column {
		text-align: right;
	}

	.links {
		display: flex;
		flex-wrap: wrap;
		gap: 1.5rem;
		justify-content: flex-end;
	}

	.links a {
		color: rgb(var(--gray));
		text-decoration: none;
		transition: color 0.2s ease;
	}

	.links a:hover {
		color: var(--green-bright);
	}

	.social-links {
		display: flex;
		justify-content: flex-end;
		gap: 1.5rem;
		margin-top: 1rem;
	}

	.social-icon {
		width: 24px;
		height: 24px;
		vertical-align: middle;
		color: rgb(var(--gray));
		transition: color 0.2s ease;
	}

	.social-links a:hover .social-icon {
		color: var(--green-bright);
	}

	.newsletter h3 {
		font-size: 1.25em;
		margin-top: 0;
		margin-bottom: 0.5rem;
		color: rgb(var(--black));
	}

	.newsletter p {
		margin: 0 0 1rem 0;
		color: rgb(var(--gray));
	}

	.embeddable-buttondown-form {
		display: flex;
		gap: 0.5rem;
	}

	.embeddable-buttondown-form input[type="email"] {
		flex-grow: 1;
		padding: 0.5rem;
		border: 1px solid #CCCCCC; /* Borda cinza claro */
		border-radius: 4px;
		background-color: #000000;
		color: #FFFFFF;
	}

	.embeddable-buttondown-form input[type="email"]::placeholder {
		color: #BBBBBB; /* Placeholder cinza mais claro */
		opacity: 1; /* Garante que a cor seja aplicada */
	}

	.embeddable-buttondown-form input[type="submit"] {
		padding: 0.5rem 1rem;
		border: 1px solid #CCCCCC; /* Borda cinza claro */
		border-radius: 4px;
		background-color: #000000;
		color: #FFFFFF;
		font-weight: bold;
		cursor: pointer;
		transition: background-color 0.2s ease, color 0.2s ease;
	}

	.embeddable-buttondown-form input[type="submit"]:hover {
		background-color: #FFFFFF;
		color: #000000;
	}

	@media (max-width: 768px) {
		.footer-container {
			flex-direction: column;
			align-items: flex-start;
		}
		.copyright-column, .links-column {
			text-align: left;
		}
		.links {
			justify-content: flex-start;
		}
	}
</style>
