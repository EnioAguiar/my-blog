---
import { SITE_TITLE } from '../consts';
import HeaderLink from './HeaderLink.astro';
import { ui, defaultLang } from '../i18n/ui';

function getLangFromUrl(url: URL) {
  const [, lang] = url.pathname.split('/');
  if (lang in ui) return lang as keyof typeof ui;
  return defaultLang;
}

const lang = getLangFromUrl(Astro.url);
const t = ui[lang];
---

<header>
	<nav>
		<div class="nav-left">
			<a href={`/${lang}/`} class="site-title-link">{SITE_TITLE}</a>
		</div>
		<div class="nav-right">
			<HeaderLink href={`/${lang}/${t['nav.categories.slug']}/`} class="categories-link">{t['nav.categories']}</HeaderLink>
			<div class="language-switcher">
				<a href="/pt/" class={lang === 'pt' ? 'active' : ''}>PT</a>
				<span class="separator">|</span>
				<a href="/en/" class={lang === 'en' ? 'active' : ''}>EN</a>
			</div>
		</div>
	</nav>
</header>
<style>
	header {
		position: sticky;
		top: 0;
		z-index: 10;
		margin: 0;
		padding: 0 1.5em;
		background: #000000;
		border-bottom: 3px solid #FFFFFF;
	}
	nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
		height: 4.5rem;
	}
	.site-title-link {
		font-size: 1.8em;
		font-weight: 700;
		text-decoration: none !important; /* Remove o sublinhado com prioridade */
		color: rgb(var(--black)); /* Cor padrão branca */
		text-shadow: none; /* Sem brilho por padrão */
		transition: color 0.3s ease, text-shadow 0.3s ease;
	}
	.site-title-link:hover {
		color: var(--green); /* Cor verde no hover */
		text-shadow: 0 0 8px rgba(89, 239, 11, 0.4); /* Efeito de brilho no hover */
	}
	.nav-right {
		display: flex;
		align-items: center;
		gap: 1.5rem;
	}
	.categories-link {
		padding: 0.6em 1.2em; /* Aumenta o padding */
		border: 2px solid rgb(var(--gray)); /* Borda mais grossa */
		border-radius: 20px;
		color: rgb(var(--gray-dark));
		text-decoration: none;
		font-family: "Poppins", sans-serif; /* Fonte de título */
		font-size: 0.8em; /* Ajusta o tamanho da fonte */
		font-weight: 600; /* Mais pesado */
		text-transform: uppercase; /* Caixa alta */
		letter-spacing: 0.05em; /* Espaçamento entre letras */
		transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
	}
	.categories-link:hover,
	.categories-link.active {
		background-color: var(--green);
		border-color: var(--green);
		color: #000000;
	}
	.language-switcher {
		display: flex;
		align-items: center;
		gap: 0.5rem;
	}
	.language-switcher a {
		color: rgb(var(--gray-dark));
		text-decoration: none;
		font-weight: 500;
	}
	.language-switcher a.active {
		color: var(--green-bright);
		font-weight: 700;
	}
	.separator {
		color: rgb(var(--gray-dark));
	}
</style>